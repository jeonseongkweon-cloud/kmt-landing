<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>ìˆ˜ë ¨ìƒ ì¡°íšŒ</title>

<style>
body{
  font-family: Arial, sans-serif;
  background:#0b0f19;
  color:white;
  margin:0;
  padding:20px;
}
h1{ text-align:center; margin-bottom:25px; }
.search-box{ text-align:center; margin-bottom:20px; }
input{
  padding:10px;
  width:220px;
  border-radius:6px;
  border:none;
  font-size:16px;
}
button{
  padding:10px 15px;
  border:none;
  border-radius:6px;
  background:gold;
  font-weight:bold;
  cursor:pointer;
  margin-left:8px;
}
.card{
  background:#111827;
  padding:20px;
  border-radius:12px;
  max-width:420px;
  margin:25px auto;
  box-shadow:0 0 15px rgba(0,0,0,0.5);
}
.card img{
  width:120px;
  border-radius:10px;
  display:block;
  margin:0 auto 15px;
}
.label{ font-weight:bold; color:gold; }
.message{ text-align:center; margin-top:20px; }
</style>
</head>

<body>

<h1>ìˆ˜ë ¨ìƒ ì¡°íšŒ</h1>

<div class="search-box">
  <input type="text" id="searchName" placeholder="ì´ë¦„ ì…ë ¥">
  <button onclick="searchStudent()">ì¡°íšŒ</button>
</div>

<div id="result"></div>

<script>

// ğŸ”¥ Google CSV ì£¼ì†Œ
const rawURL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vTndQfKXAUuJaAZTbFYhWbNhlhFmg2tNyaaRJRRlxYGCgUawZUeytRZ-aH9nusJSAUHYYozgO6aO/pub?gid=0&single=true&output=csv";

// ğŸ”¥ CORS ìš°íšŒ í”„ë¡ì‹œ
const sheetURL = "https://api.allorigins.win/raw?url=" + encodeURIComponent(rawURL);

function clean(v){
  return (v ?? "")
    .toString()
    .replace(/^\uFEFF/, "")
    .replace(/\r/g, "")
    .replace(/^"|"$/g, "")
    .trim();
}

async function fetchData(){
  const res = await fetch(sheetURL);
  if(!res.ok) throw new Error("ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨");

  const text = await res.text();
  const lines = text.split("\n").filter(l => l.trim() !== "");
  return lines.map(l => l.split(",").map(clean));
}

async function searchStudent(){
  const name = clean(document.getElementById("searchName").value);
  const resultEl = document.getElementById("result");
  resultEl.innerHTML = "";

  if(!name){
    resultEl.innerHTML = "<div class='message'>ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”.</div>";
    return;
  }

  let rows;
  try{
    rows = await fetchData();
  }catch(e){
    resultEl.innerHTML = "<div class='message'>ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.</div>";
    console.error(e);
    return;
  }

  let found = null;

  for(let i=1; i<rows.length; i++){
    if(rows[i][1] === name){
      found = rows[i];
      break;
    }
  }

  if(!found){
    resultEl.innerHTML = "<div class='message'>ì¡°íšŒ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</div>";
    return;
  }

  resultEl.innerHTML = `
    <div class="card">
      ${found[6] ? `<img src="${found[6]}" alt="ì‚¬ì§„">` : ""}
      <p><span class="label">ì•„ì´ë””:</span> ${found[0]}</p>
      <p><span class="label">ì´ë¦„:</span> ${found[1]}</p>
      <p><span class="label">ìƒë…„ì›”ì¼:</span> ${found[2]}</p>
      <p><span class="label">íƒœê¶Œë„ë‹¨ì¦:</span> ${found[3]}</p>
      <p><span class="label">ê²½í˜¸ë¬´ìˆ ë‹¨ì¦:</span> ${found[4]}</p>
      <p><span class="label">ê²€ë„ë‹¨ì¦:</span> ${found[5]}</p>
      <p><span class="label">í˜„ì¬í¬ì¸íŠ¸:</span> ${found[7]}</p>
      <p><span class="label">ë³´ìœ ìê²©ì¦:</span> ${found[8]}</p>
      <p><span class="label">ë³´ìœ ì¸ì¦ì„œ:</span> ${found[9]}</p>
    </div>
  `;
}

</script>

</body>
</html>
