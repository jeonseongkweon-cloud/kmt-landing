<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>수련생 조회</title>

<style>
body{
  font-family: Arial, sans-serif;
  background:#0b0f19;
  color:white;
  margin:0;
  padding:20px;
}

h1{
  text-align:center;
  margin-bottom:20px;
}

.search-box{
  text-align:center;
  margin-bottom:20px;
}

input{
  padding:10px;
  width:200px;
  border-radius:6px;
  border:none;
}

button{
  padding:10px 15px;
  border:none;
  border-radius:6px;
  background:gold;
  font-weight:bold;
  cursor:pointer;
}

.card{
  background:#111827;
  padding:20px;
  border-radius:12px;
  max-width:400px;
  margin:20px auto;
  box-shadow:0 0 15px rgba(0,0,0,0.5);
}

.card img{
  width:120px;
  border-radius:10px;
  display:block;
  margin:0 auto 15px;
}

.label{
  font-weight:bold;
  color:gold;
}
</style>
</head>

<body>

<h1>수련생 조회</h1>

<div class="search-box">
  <input type="text" id="searchName" placeholder="이름 입력">
  <button onclick="searchStudent()">조회</button>
</div>

<div id="result"></div>

<script>
const sheetURL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vTndQfKXAUuJaAZTbFYhWbNhlhFmg2tNyaaRJRRlxYGCgUawZUeytRZ-aH9nusJSAUHYYozgO6aO/pub?gid=0&single=true&output=csv";

async function fetchData(){
  const response = await fetch(sheetURL);
  const text = await response.text();
  const rows = text.split("\n").map(row => row.split(","));
  return rows;
}

async function searchStudent(){
  const name = document.getElementById("searchName").value.trim();
  const rows = await fetchData();

  let resultHTML = "";

  for(let i=1; i<rows.length; i++){
    if(rows[i][1] && rows[i][1].trim() === name){

      resultHTML = `
      <div class="card">
        <img src="${rows[i][6]}" alt="사진">
        <p><span class="label">이름:</span> ${rows[i][1]}</p>
        <p><span class="label">태권도단증:</span> ${rows[i][3]}</p>
        <p><span class="label">경호무술단증:</span> ${rows[i][4]}</p>
        <p><span class="label">검도단증:</span> ${rows[i][5]}</p>
        <p><span class="label">현재포인트:</span> ${rows[i][7]}</p>
        <p><span class="label">보유인증서:</span> ${rows[i][9]}</p>
      </div>
      `;
      break;
    }
  }

  if(resultHTML === ""){
    resultHTML = "<p style='text-align:center;'>조회 결과가 없습니다.</p>";
  }

  document.getElementById("result").innerHTML = resultHTML;
}
</script>

</body>
</html>
